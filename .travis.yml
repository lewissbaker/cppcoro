# Copyright Lewis Baker 2017
#
# Distributed under MIT license.
# See LICENSE.txt file for details.

language: cpp

os: linux

dist: trusty

git:
  submodules: true

addons:
  apt:
    packages:
    - python2.7

compiler:
- clang
    
env:
  global:
  - LLVM_INSTALL_PREFIX=${TRAVIS_BUILD_DIR}/tools/llvm
  include:
  - RELEASE=debug ARCH=x86
  - RELEASE=optimised ARCH=x86
  - RELEASE=debug ARCH=x64
  - RELEASE=optimised ARCH=x64
 
before_install:
- ./build-clang.sh
- export PATH="${LLVM_INSTALL_PREFIX}/bin:$PATH"

before_script:
- source ./init.sh

script:
- cake architecture=$ARCH release=$RELEASE

notifications:
  email: false
