# Copyright Lewis Baker 2017
#
# Distributed under MIT license.
# See LICENSE.txt file for details.

language: cpp

os: linux

dist: trusty

git:
  submodules: true

addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    - llvm-toolchain-trusty
    packages:
    - python2.7
    - clang-6.0
    - lld-6.0

compiler:
- clang
    
env:
  global:
  - TOOLS_DIR=${TRAVIS_BUILD_DIR}/tools
  - LLVM_INSTALL_PREFIX=${TOOLS_DIR}/llvm
matrix:
  include:
  - env: RELEASE=debug ARCH=x64 CLANG_VERSION=6.0
  - env: RELEASE=optimised ARCH=x64 CLANG_VERSION=6.0
 
before_install:
- export CC="$CC-$CLANG_VERSION"
- export CXX="$CXX-$CLANG_VERSION"
 
before_script:
- source ./init.sh

script:
- cake architecture=$ARCH release=$RELEASE --clang-executable="$CC"

notifications:
  email: false
